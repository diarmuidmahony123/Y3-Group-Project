<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health AI Predictor</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <style>
        body {
            display: flex;
            background-image: url(images/2870382_15000.jpg);
        }

        nav {
            display: flex;
            flex-direction: column;
            background-color: #333;
            padding: 20px;
            height: 100vh;
            width: 200px;
            position: fixed;
        }

        .logo {
            margin-bottom: 20px;
            width: 20px;
            height: 20px;
        }
        img {
            width: 110px;
            height: 110px;
            margin-left: 5px;
            margin-top: 1px;
            border: 100px;
            border-radius: 100%;
            overflow: hidden;

        }

        .nav-link a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 10px;
            transition: color 0.3s;
        }

        .nav-link a:hover {
            color: #04AA6D;
        }
        .logo {
            margin-bottom: 20px;
            width: 20px;
            height: 20px;
        }
        img {
            width: 110px;
            height: 110px;
            margin-left: 5px;
            margin-top: 1px;
            border: 100px;
            border-radius: 100%;
            overflow: hidden;

        }


        #content {
            margin-left: 250px;
            padding: 20px;
        }

        .container {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        form {
            display: block;
            padding: 20px;
        }

        label {
            margin-bottom: 10px;
            display: block;
            font-weight: bold;
        }

        input, select {
            margin-bottom: 20px;
            width: 100%;
            padding: 8px;
        }

        button {
            padding: 10px;
            background-color: #3498db;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #2980b9;
        }

        #result {
            margin-top: 20px;
        }
        #screen-reader-btn {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        #screen-reader-btn:hover {
            background-color: #0056b3; /* Change the hover color as needed */
        }
    </style>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
      
</head>
<body class="bg-light">
    <button id="screen-reader-btn" onclick="toggleScreenReader()">
        <span id="screen-reader-icon" role="img" aria-label="Headphone Icon">ðŸŽ§</span> start reader
    </button>
    <script>
      function toggleScreenReader() {
            const screenReaderBtn = document.getElementById('screen-reader-btn');
            const isScreenReaderActive = screenReaderBtn.getAttribute('aria-pressed') === 'true';

            if (isScreenReaderActive) {
                // Deactivate screen reader
                screenReaderBtn.setAttribute('aria-pressed', 'false');
                screenReaderBtn.textContent = 'ðŸŽ§ start reader';
                stopReading();
            } else {
                // Activate screen reader
                screenReaderBtn.setAttribute('aria-pressed', 'true');
                screenReaderBtn.textContent = 'ðŸ”‡ stop reader';
                readPageContent();
            }
        }

        function readPageContent() {
    const contentElement = document.getElementById('content');
    const navElement = document.querySelector('nav');
    const synth = window.speechSynthesis;

    // Read navigation bar content
    const navText = navElement.innerText;

    // Read form content
    const formGroups = contentElement.getElementsByClassName('form-group');
    let formContent = '';

    for (const formGroup of formGroups) {
        const labelElement = formGroup.querySelector('label');
        const inputElement = formGroup.querySelector('input, select');
        const labelText = labelElement ? labelElement.innerText : '';
        const inputValue = inputElement ? inputElement.value : '';

        formContent += `${labelText}. ${inputValue}. `;
    }

    // Concatenate the content
    const pageContent = `Navigation bar. ${navText}. Form. ${formContent}`;

    // Speak the content
    const utterance = new SpeechSynthesisUtterance(pageContent);
    synth.speak(utterance);
}

        function stopReading() {
            window.speechSynthesis.cancel();
        }

    </script>
    <nav>
        <div class="logo">
            <img src="images/Health AI.png">
        </div>
        <div class="nav-links">
            <br><br><br>
            <div class="nav-link"><a class="active" href="Home.html">Home</a></div>
            <div class="nav-link"><a href="HealthAiPrediction.html">HealthAiPrediction</a></div>
            <div class="nav-link"><a href="contact.html">Contact</a></div>
            <div class="nav-link"><a href="index.html">Logout</a></div>
            <div class="nav-link"><a href="MedProfessiosForm.html">Professionals Form</a></div>
            <div class="nav-link"><a href="HearthDiseasePredict.html">Heath Disease Predict</a></div>
            <div class="nav-link"><a href="LungCancer.html">Lung cancer predict</a></div>
        </div>
    </nav>

    <!-- Content -->
    <div id="content" class="container mt-5">
        
              <!-- Heart Disease Prediction Form -->
<div class="form-group">
    <label for="diseaseType"><b>Heart Disease Prediction</b></label><br>
    
    <label for="age">Age:</label>
    <input type="number" class="form-control" id="age" name="age" required aria-labelledby="age-label" aria-describedby="age-desc">
</div>

<div class="form-group">
    <label for="sex">Sex:</label>
    <select class="form-control" id="sex" name="sex" aria-labelledby="sex-label" aria-describedby="sex-desc">
        <option value="1">Male</option>
        <option value="0">Female</option>
    </select>
</div>

<div class="form-group">
    <label for="cp">Chest Pain Type:</label>
    <select class="form-control" id="cp" name="cp" aria-labelledby="cp-label" aria-describedby="cp-desc">
        <option value="1">Typical Angina</option>
        <option value="2">Atypical Angina</option>
        <option value="3">Non-Anginal Pain</option>
        <option value="4">Asymptomatic</option>
    </select>
</div>

<div class="form-group">
    <label for="trestbps">Resting Blood Pressure:</label>
    <input type="number" class="form-control" id="trestbps" name="trestbps" required aria-labelledby="trestbps-label" aria-describedby="trestbps-desc">
</div>

<div class="form-group">
    <label for="chol">Cholesterol:</label>
    <input type="number" class="form-control" id="chol" name="chol" required aria-labelledby="chol-label" aria-describedby="chol-desc">
</div>

<div class="form-group">
    <label for="fbs">Fasting Blood Sugar:</label>
    <select class="form-control" id="fbs" name="fbs" aria-labelledby="fbs-label" aria-describedby="fbs-desc">
        <option value="1">True (> 120 mg/dl)</option>
        <option value="0">False (<= 120 mg/dl)</option>
    </select>
</div>

<div class="form-group">
    <label for="restecg">Resting ECG:</label>
    <select class="form-control" id="restecg" name="restecg" aria-labelledby="restecg-label" aria-describedby="restecg-desc">
        <option value="0">Normal</option>
        <option value="1">ST-T Wave Abnormality</option>
        <option value="2">Probable Left Ventricular Hypertrophy</option>
    </select>
</div>

<div class="form-group">
    <label for="thalach">Maximum Heart Rate:</label>
    <input type="number" class="form-control" id="thalach" name="thalach" required aria-labelledby="thalach-label" aria-describedby="thalach-desc">
</div>

<div class="form-group">
    <label for="exang">Exercise Induced Angina:</label>
    <select class="form-control" id="exang" name="exang" aria-labelledby="exang-label" aria-describedby="exang-desc">
        <option value="1">Yes</option>
        <option value="0">No</option>
    </select>
</div>

<div class="form-group">
    <label for="oldpeak">ST Depression:</label>
    <input type="number" class="form-control" id="oldpeak" name="oldpeak" step="0.1" required aria-labelledby="oldpeak-label" aria-describedby="oldpeak-desc">
</div>

<div class="form-group">
    <label for="slope">Slope of the Peak Exercise ST Segment:</label>
    <select class="form-control" id="slope" name="slope" aria-labelledby="slope-label" aria-describedby="slope-desc">
        <option value="1">Upsloping</option>
        <option value="2">Flat</option>
        <option value="3">Downsloping</option>
    </select>
</div>

<div class="form-group">
    <label for="ca">Number of Major Vessels:</label>
    <input type="number" class="form-control" id="ca" name="ca" required aria-labelledby="ca-label" aria-describedby="ca-desc">
</div>

<div class="form-group">
    <label for="thal">Thalassemia:</label>
    <select class="form-control" id="thal" name="thal" aria-labelledby="thal-label" aria-describedby="thal-desc">
        <option value="1">Normal</option>
        <option value="2">Fixed Defect</option>
        <option value="3">Reversible Defect</option>
    </select>
</div>

<button type="button" class="btn btn-primary" id="predictHeartButton" aria-live="polite" aria-atomic="true">Predict Heart Disease</button>

<!-- Result Section -->
<div class="mt-4" id="heartResult" aria-live="polite" aria-atomic="true"></div>


    <!-- Bootstrap JS and Popper.js -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script type="module">
        document.getElementById('predictHeartButton').addEventListener('click', async (event) => {
            const form = document.getElementById('heart-form');
            const formData = new FormData(form);
            const formDataObject = {};
            formData.forEach((value, key) => {
                formDataObject[key] = value;
            });

            try {
                const response = await fetch('https://health-ai-predict.onrender.com/predict/heart_disease', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formDataObject),
                });

                if (response.ok) {
                    const result = await response.json();
                    displayHeartPrediction(result);
                } else {
                    console.error('Heart Disease Prediction request failed:', response.statusText);
                }
            } catch (error) {
                console.error('Error during Heart Disease Prediction request:', error.message);
            }
        });

        function displayHeartPrediction(prediction) {
            const resultElement = document.getElementById('heartResult');
            resultElement.innerHTML = `
                <p>Heart Disease Prediction:</p>
                <p>Risk: ${prediction.risk_level}</p>
                <p>Predicted Risk: ${prediction.predicted_risk.toFixed(2)}</p>
            `;
        }
    </script>
</body>

</html>
